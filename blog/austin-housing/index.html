<!DOCTYPE html>
<html lang="en" dir="ltr"><head>
  
                           
     


<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.91.2" />
<title>Predict housing prices in Austin TX with tidymodels and xgboost | Julia Silge</title>


<meta property="twitter:site" content="@juliasilge">
<meta property="twitter:creator" content="@juliasilge">







  
    
  
<meta name="description" content="A data science blog">


<meta property="og:site_name" content="Julia Silge">
<meta property="og:title" content="Predict housing prices in Austin TX with tidymodels and xgboost | Julia Silge">
<meta property="og:description" content="A data science blog" />
<meta property="og:type" content="page" />
<meta property="og:url" content="https://juliasilge.com/blog/austin-housing/" />
<meta property="og:locale" content="en">




    
        <meta property="og:image" content="https://juliasilge.com/blog/austin-housing/featured.png" >
        <meta property="twitter:card" content="summary_large_image">
        <meta name="twitter:image" content="https://juliasilge.com/blog/austin-housing/featured.png" >
    
    
  <meta itemprop="name" content="Predict housing prices in Austin TX with tidymodels and xgboost">
<meta itemprop="description" content="More xgboost with tidymodels! Learn about feature engineering to incorporate text information as indicator variables for boosted trees."><meta itemprop="datePublished" content="2021-08-15T00:00:00+00:00" />
<meta itemprop="dateModified" content="2021-08-15T00:00:00+00:00" />
<meta itemprop="wordCount" content="2388"><meta itemprop="image" content="https://juliasilge.com/blog/austin-housing/featured.png">
<meta itemprop="keywords" content="rstats,tidymodels," />
  
  
  <!--[if IE]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link rel="shortcut icon" href="/img/icon.png" type="image/x-icon">
  <link rel="icon" href="/img/icon.png" type="image/x-icon">
  
  
  <link rel="stylesheet" href="/style.main.min.34750661ca065ca7ddb87b2b28cab82abf493a21c1e3852e0755fba776b031b7.css" integrity="sha256-NHUGYcoGXKfduHsrKMq4Kr9JOiHB44UuB1X7p3awMbc=" media="screen">
  
  
  <script src="/panelset.min.078a92db9bd3228df502db3d9e0453c3cf3d910abe3f8deca0ad196c7071ad41.js" type="text/javascript"></script>
  
  
  <script src="/main.min.bb67dea4a2ee41aab688effd180f2d02662e47280f0021495f2c0ce24c461f65.js" type="text/javascript"></script>
</head>
<body>
      <div class="grid-container">
<header class="site-header pt4 pb2 mb4 bb b--transparent ph5 headroom z-max" role="banner">
  <nav class="site-nav db dt-l w-100" role="navigation">
    <a class="site-brand db dtc-l v-mid link no-underline w-100 w-33-l tc tl-l" href="https://juliasilge.com/" title="Home">
      <span class="f4 fw7">Julia Silge</span>
    </a>
    <div class="site-links db dtc-l v-mid w-100 w-47-l tc tr-l mt3 mt0-l ttu tracked">
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/about/" title="About me">About</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 active" href="/blog/" title="Blog">Blog</a>
      
      
    </div>
  </nav>
</header>

<main class="page-main pa4" role="main">
  <section class="page-content mw7 center">
    <article class="post-content pa0 ph4-l">
      <header class="post-header">
        <h1 class="f1 lh-solid measure-narrow mb3 fw4">Predict housing prices in Austin TX with tidymodels and xgboost</h1>
        
        <p class="f6 measure lh-copy mv1">By Julia Silge in <a href="https://juliasilge.com/categories/rstats">rstats</a>  <a href="https://juliasilge.com/categories/tidymodels">tidymodels</a> </p>
        <p class="f7 db mv0 ttu">August 15, 2021</p>

      

      </header>
      <section class="post-body pt5 pb4">
        <p>This is the latest in my series of 
<a href="https://juliasilge.com/category/tidymodels/" target="_blank" rel="noopener">screencasts</a> demonstrating how to use the 
<a href="https://www.tidymodels.org/" target="_blank" rel="noopener">tidymodels</a> packages, from just getting started to tuning more complex models. My screencasts lately have focused on xgboost as I have participated in 
<a href="https://www.notion.so/SLICED-Show-c7bd26356e3a42279e2dfbafb0480073" target="_blank" rel="noopener">SLICED</a>, a competitive data science streaming show. This past week were the semifinals, where we competed to predict prices of homes in Austin, TX. üè† One of the more interesting available variables for this dataset was the text description of the real estate listings, so let‚Äôs walk through one way to incorporate text information with boosted tree modeling.</p>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube-nocookie.com/embed/1LEW8APSOJo" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>
</br>
<p>Here is the code I used in the video, for those who prefer reading instead of or in addition to video.</p>




<h2 id="explore-data">Explore data
  <a href="#explore-data"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>Our modeling goal is to predict 
<a href="https://www.kaggle.com/c/sliced-s01e11-semifinals/" target="_blank" rel="noopener">the price (binned) for homes in Austin, TX</a> given features about the real estate listing. This is a multiclass classification challenge, where we needed to submit a probability for each home being in each <code>priceRange</code> bin. The main data set provided is in a CSV file called <code>training.csv</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#06287e">library</span>(tidyverse)
train_raw <span style="color:#666">&lt;-</span> <span style="color:#06287e">read_csv</span>(<span style="color:#4070a0">&#34;train.csv&#34;</span>)

train_raw <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">count</span>(priceRange)
</code></pre></div><pre><code>## # A tibble: 5 √ó 2
##   priceRange        n
##   &lt;chr&gt;         &lt;int&gt;
## 1 0-250000       1249
## 2 250000-350000  2356
## 3 350000-450000  2301
## 4 450000-650000  2275
## 5 650000+        1819
</code></pre>
<p>You can watch 
<a href="https://www.twitch.tv/videos/1114553508" target="_blank" rel="noopener">this week‚Äôs full episode of SLICED</a> to see lots of exploratory data analysis and visualization of this dataset, but let‚Äôs just make a few data visualization for context in this blog post.</p>
<p>How is price distributed across Austin?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">price_plot <span style="color:#666">&lt;-</span>
  train_raw <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">mutate</span>(priceRange <span style="color:#666">=</span> <span style="color:#06287e">parse_number</span>(priceRange)) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">ggplot</span>(<span style="color:#06287e">aes</span>(longitude, latitude, z <span style="color:#666">=</span> priceRange)) <span style="color:#666">+</span>
  <span style="color:#06287e">stat_summary_hex</span>(alpha <span style="color:#666">=</span> <span style="color:#40a070">0.8</span>, bins <span style="color:#666">=</span> <span style="color:#40a070">50</span>) <span style="color:#666">+</span>
  <span style="color:#06287e">scale_fill_viridis_c</span>() <span style="color:#666">+</span>
  <span style="color:#06287e">labs</span>(
    fill <span style="color:#666">=</span> <span style="color:#4070a0">&#34;mean&#34;</span>,
    title <span style="color:#666">=</span> <span style="color:#4070a0">&#34;Price&#34;</span>
  )

price_plot
</code></pre></div><img src="https://juliasilge.com/blog/austin-housing/index_files/figure-html/unnamed-chunk-3-1.png" width="1950" />
<p>Let‚Äôs look at this distribution and compare it to some other variables available in the dataset. We can create a little plotting function 
<a href="https://dplyr.tidyverse.org/articles/programming.html#indirection" target="_blank" rel="noopener">using <code>{{}}</code></a> to quickly iterate through, and put them together with 
<a href="https://patchwork.data-imaginist.com/" target="_blank" rel="noopener">patchwork</a>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#06287e">library</span>(patchwork)

plot_austin <span style="color:#666">&lt;-</span> <span style="color:#06287e">function</span>(var, title) {
  train_raw <span style="color:#666">%&gt;%</span>
    <span style="color:#06287e">ggplot</span>(<span style="color:#06287e">aes</span>(longitude, latitude, z <span style="color:#666">=</span> {{ var }})) <span style="color:#666">+</span>
    <span style="color:#06287e">stat_summary_hex</span>(alpha <span style="color:#666">=</span> <span style="color:#40a070">0.8</span>, bins <span style="color:#666">=</span> <span style="color:#40a070">50</span>) <span style="color:#666">+</span>
    <span style="color:#06287e">scale_fill_viridis_c</span>() <span style="color:#666">+</span>
    <span style="color:#06287e">labs</span>(
      fill <span style="color:#666">=</span> <span style="color:#4070a0">&#34;mean&#34;</span>,
      title <span style="color:#666">=</span> title
    )
}

(price_plot <span style="color:#666">+</span> <span style="color:#06287e">plot_austin</span>(avgSchoolRating, <span style="color:#4070a0">&#34;School rating&#34;</span>)) <span style="color:#666">/</span>
  (<span style="color:#06287e">plot_austin</span>(yearBuilt, <span style="color:#4070a0">&#34;Year built&#34;</span>) <span style="color:#666">+</span> <span style="color:#06287e">plot_austin</span>(<span style="color:#06287e">log</span>(lotSizeSqFt), <span style="color:#4070a0">&#34;Lot size (log)&#34;</span>))
</code></pre></div><img src="https://juliasilge.com/blog/austin-housing/index_files/figure-html/unnamed-chunk-4-1.png" width="3000" />
<p>Notice the east/west gradients as well as the radial changes. I went to grad school in Austin and this all look very familiar to me!</p>




<h2 id="finding-words-related-to-price">Finding words related to price
  <a href="#finding-words-related-to-price"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>The <code>description</code> variable contains text from each real estate listing. We could try to use the text features directly in modeling, 
<a href="https://smltar.com/" target="_blank" rel="noopener">as described in our book</a>, but I‚Äôve found that often isn‚Äôt great for boosted tree models (which tend to be what works best overall in an environment like SLICED). Let‚Äôs walk through another option which may work better in some situations, which is to use some separate analysis to identify important words and then create dummy variables indicating whether any given listing has those words.</p>
<p>Let‚Äôs start by tidying the <code>description</code> text.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#06287e">library</span>(tidytext)

austin_tidy <span style="color:#666">&lt;-</span>
  train_raw <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">mutate</span>(priceRange <span style="color:#666">=</span> <span style="color:#06287e">parse_number</span>(priceRange) <span style="color:#666">+</span> <span style="color:#40a070">100000</span>) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">unnest_tokens</span>(word, description) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">anti_join</span>(<span style="color:#06287e">get_stopwords</span>())

austin_tidy <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">count</span>(word, sort <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">TRUE</span>)
</code></pre></div><pre><code>## # A tibble: 17,944 √ó 2
##    word         n
##    &lt;chr&gt;    &lt;int&gt;
##  1 home     11620
##  2 kitchen   5721
##  3 room      5494
##  4 austin    4918
##  5 new       4772
##  6 large     4771
##  7 2         4585
##  8 bedrooms  4571
##  9 contains  4413
## 10 3         4386
## # ‚Ä¶ with 17,934 more rows
</code></pre>
<p>Next, let‚Äôs compute word frequencies per price range for the top 100 words.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">top_words <span style="color:#666">&lt;-</span>
  austin_tidy <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">count</span>(word, sort <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">TRUE</span>) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">filter</span>(<span style="color:#666">!</span>word <span style="color:#666">%in%</span> <span style="color:#06287e">as.character</span>(<span style="color:#40a070">1</span><span style="color:#666">:</span><span style="color:#40a070">5</span>)) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">slice_max</span>(n, n <span style="color:#666">=</span> <span style="color:#40a070">100</span>) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">pull</span>(word)


word_freqs <span style="color:#666">&lt;-</span>
  austin_tidy <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">count</span>(word, priceRange) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">complete</span>(word, priceRange, fill <span style="color:#666">=</span> <span style="color:#06287e">list</span>(n <span style="color:#666">=</span> <span style="color:#40a070">0</span>)) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">group_by</span>(priceRange) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">mutate</span>(
    price_total <span style="color:#666">=</span> <span style="color:#06287e">sum</span>(n),
    proportion <span style="color:#666">=</span> n <span style="color:#666">/</span> price_total
  ) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">ungroup</span>() <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">filter</span>(word <span style="color:#666">%in%</span> top_words)


word_freqs
</code></pre></div><pre><code>## # A tibble: 500 √ó 5
##    word       priceRange     n price_total proportion
##    &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt;
##  1 access         100000   180       56290    0.00320
##  2 access         350000   365      114853    0.00318
##  3 access         450000   322      116678    0.00276
##  4 access         550000   294      125585    0.00234
##  5 access         750000   248      112073    0.00221
##  6 appliances     100000   209       56290    0.00371
##  7 appliances     350000   583      114853    0.00508
##  8 appliances     450000   576      116678    0.00494
##  9 appliances     550000   567      125585    0.00451
## 10 appliances     750000   391      112073    0.00349
## # ‚Ä¶ with 490 more rows
</code></pre>
<p>Now let‚Äôs use modeling to find the words that are <strong>increasing</strong> with price and those that are <strong>decreasing</strong> with price.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">word_mods <span style="color:#666">&lt;-</span>
  word_freqs <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">nest</span>(data <span style="color:#666">=</span> <span style="color:#06287e">c</span>(priceRange, n, price_total, proportion)) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">mutate</span>(
    model <span style="color:#666">=</span> <span style="color:#06287e">map</span>(data, <span style="color:#666">~</span> <span style="color:#06287e">glm</span>(<span style="color:#06287e">cbind</span>(n, price_total) <span style="color:#666">~</span> priceRange, ., family <span style="color:#666">=</span> <span style="color:#4070a0">&#34;binomial&#34;</span>)),
    model <span style="color:#666">=</span> <span style="color:#06287e">map</span>(model, tidy)
  ) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">unnest</span>(model) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">filter</span>(term <span style="color:#666">==</span> <span style="color:#4070a0">&#34;priceRange&#34;</span>) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">mutate</span>(p.value <span style="color:#666">=</span> <span style="color:#06287e">p.adjust</span>(p.value)) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">arrange</span>(<span style="color:#666">-</span>estimate)

word_mods
</code></pre></div><pre><code>## # A tibble: 100 √ó 7
##    word     data             term          estimate std.error statistic  p.value
##    &lt;chr&gt;    &lt;list&gt;           &lt;chr&gt;            &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
##  1 outdoor  &lt;tibble [5 √ó 4]&gt; priceRange 0.00000325    1.85e-7     17.6  4.37e-67
##  2 custom   &lt;tibble [5 √ó 4]&gt; priceRange 0.00000214    1.47e-7     14.6  3.98e-46
##  3 pool     &lt;tibble [5 √ó 4]&gt; priceRange 0.00000159    1.22e-7     13.0  6.12e-37
##  4 office   &lt;tibble [5 √ó 4]&gt; priceRange 0.00000150    1.46e-7     10.3  6.03e-23
##  5 suite    &lt;tibble [5 √ó 4]&gt; priceRange 0.00000143    1.39e-7     10.3  4.03e-23
##  6 gorgeous &lt;tibble [5 √ó 4]&gt; priceRange 0.000000975   1.62e-7      6.02 1.19e- 7
##  7 w        &lt;tibble [5 √ó 4]&gt; priceRange 0.000000920   9.05e-8     10.2  2.33e-22
##  8 windows  &lt;tibble [5 √ó 4]&gt; priceRange 0.000000890   1.28e-7      6.95 2.81e-10
##  9 private  &lt;tibble [5 √ó 4]&gt; priceRange 0.000000889   1.15e-7      7.70 1.08e-12
## 10 car      &lt;tibble [5 √ó 4]&gt; priceRange 0.000000778   1.66e-7      4.69 1.52e- 4
## # ‚Ä¶ with 90 more rows
</code></pre>
<p>Let‚Äôs make something like a 
<a href="https://en.wikipedia.org/wiki/Volcano_plot_%28statistics%29" target="_blank" rel="noopener">volcano plot</a> to see the relationship between p-value and effect size for these words.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#06287e">library</span>(ggrepel)

word_mods <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">ggplot</span>(<span style="color:#06287e">aes</span>(estimate, p.value)) <span style="color:#666">+</span>
  <span style="color:#06287e">geom_vline</span>(xintercept <span style="color:#666">=</span> <span style="color:#40a070">0</span>, lty <span style="color:#666">=</span> <span style="color:#40a070">2</span>, alpha <span style="color:#666">=</span> <span style="color:#40a070">0.7</span>, color <span style="color:#666">=</span> <span style="color:#4070a0">&#34;gray50&#34;</span>) <span style="color:#666">+</span>
  <span style="color:#06287e">geom_point</span>(color <span style="color:#666">=</span> <span style="color:#4070a0">&#34;midnightblue&#34;</span>, alpha <span style="color:#666">=</span> <span style="color:#40a070">0.8</span>, size <span style="color:#666">=</span> <span style="color:#40a070">2.5</span>) <span style="color:#666">+</span>
  <span style="color:#06287e">scale_y_log10</span>() <span style="color:#666">+</span>
  <span style="color:#06287e">geom_text_repel</span>(<span style="color:#06287e">aes</span>(label <span style="color:#666">=</span> word), family <span style="color:#666">=</span> <span style="color:#4070a0">&#34;IBMPlexSans&#34;</span>)
</code></pre></div><img src="https://juliasilge.com/blog/austin-housing/index_files/figure-html/unnamed-chunk-8-1.png" width="2400" />
<ul>
<li>Words like outdoor, custom, pool, suite, office <strong>increase</strong> with price.</li>
<li>Words like new, paint, carpet, great, tile, close, flooring <strong>decrease</strong> with price.</li>
</ul>
<p>These are the words that we‚Äôd like to try to detect and use in feature engineering for our xgboost model, rather than using all the text tokens as features individually.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">higher_words <span style="color:#666">&lt;-</span>
  word_mods <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">filter</span>(p.value <span style="color:#666">&lt;</span> <span style="color:#40a070">0.05</span>) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">slice_max</span>(estimate, n <span style="color:#666">=</span> <span style="color:#40a070">12</span>) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">pull</span>(word)

lower_words <span style="color:#666">&lt;-</span>
  word_mods <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">filter</span>(p.value <span style="color:#666">&lt;</span> <span style="color:#40a070">0.05</span>) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">slice_max</span>(<span style="color:#666">-</span>estimate, n <span style="color:#666">=</span> <span style="color:#40a070">12</span>) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">pull</span>(word)
</code></pre></div><p>We can look at these changes with price directly. For example, these are the words most associated with price decrease.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">word_freqs <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">filter</span>(word <span style="color:#666">%in%</span> lower_words) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">ggplot</span>(<span style="color:#06287e">aes</span>(priceRange, proportion, color <span style="color:#666">=</span> word)) <span style="color:#666">+</span>
  <span style="color:#06287e">geom_line</span>(size <span style="color:#666">=</span> <span style="color:#40a070">2.5</span>, alpha <span style="color:#666">=</span> <span style="color:#40a070">0.7</span>, show.legend <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">FALSE</span>) <span style="color:#666">+</span>
  <span style="color:#06287e">facet_wrap</span>(<span style="color:#06287e">vars</span>(word), scales <span style="color:#666">=</span> <span style="color:#4070a0">&#34;free_y&#34;</span>) <span style="color:#666">+</span>
  <span style="color:#06287e">scale_x_continuous</span>(labels <span style="color:#666">=</span> scales<span style="color:#666">::</span>dollar) <span style="color:#666">+</span>
  <span style="color:#06287e">scale_y_continuous</span>(labels <span style="color:#666">=</span> scales<span style="color:#666">::</span>percent, limits <span style="color:#666">=</span> <span style="color:#06287e">c</span>(<span style="color:#40a070">0</span>, <span style="color:#007020;font-weight:bold">NA</span>)) <span style="color:#666">+</span>
  <span style="color:#06287e">labs</span>(x <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">NULL</span>, y <span style="color:#666">=</span> <span style="color:#4070a0">&#34;proportion of total words used for homes at that price&#34;</span>) <span style="color:#666">+</span>
  <span style="color:#06287e">theme_light</span>(base_family <span style="color:#666">=</span> <span style="color:#4070a0">&#34;IBMPlexSans&#34;</span>)
</code></pre></div><img src="https://juliasilge.com/blog/austin-housing/index_files/figure-html/unnamed-chunk-10-1.png" width="3600" />
<p>Cheaper houses are ‚Äúgreat‚Äù but not expensive houses, and apparently you don‚Äôt need to mention the location (‚Äúclose,‚Äù ‚Äúminutes,‚Äù ‚Äúlocation‚Äù) of more expensive houses.</p>




<h2 id="build-a-model">Build a model
  <a href="#build-a-model"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>Let‚Äôs start our modeling by setting up our ‚Äúdata budget,‚Äù as well as the metrics (this challenge was evaluate on multiclass log loss).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#06287e">library</span>(tidymodels)

<span style="color:#06287e">set.seed</span>(<span style="color:#40a070">123</span>)
austin_split <span style="color:#666">&lt;-</span> train_raw <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">select</span>(<span style="color:#666">-</span>city) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">mutate</span>(description <span style="color:#666">=</span> <span style="color:#06287e">str_to_lower</span>(description)) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">initial_split</span>(strata <span style="color:#666">=</span> priceRange)
austin_train <span style="color:#666">&lt;-</span> <span style="color:#06287e">training</span>(austin_split)
austin_test <span style="color:#666">&lt;-</span> <span style="color:#06287e">testing</span>(austin_split)
austin_metrics <span style="color:#666">&lt;-</span> <span style="color:#06287e">metric_set</span>(accuracy, roc_auc, mn_log_loss)

<span style="color:#06287e">set.seed</span>(<span style="color:#40a070">234</span>)
austin_folds <span style="color:#666">&lt;-</span> <span style="color:#06287e">vfold_cv</span>(austin_train, v <span style="color:#666">=</span> <span style="color:#40a070">5</span>, strata <span style="color:#666">=</span> priceRange)
austin_folds
</code></pre></div><pre><code>## #  5-fold cross-validation using stratification 
## # A tibble: 5 √ó 2
##   splits              id   
##   &lt;list&gt;              &lt;chr&gt;
## 1 &lt;split [5996/1502]&gt; Fold1
## 2 &lt;split [5998/1500]&gt; Fold2
## 3 &lt;split [5999/1499]&gt; Fold3
## 4 &lt;split [5999/1499]&gt; Fold4
## 5 &lt;split [6000/1498]&gt; Fold5
</code></pre>
<p>For feature engineering, let‚Äôs use basically everything in the dataset (aside from <code>city</code>, which was not a very useful variable) and 
<a href="https://recipes.tidymodels.org/reference/step_regex.html" target="_blank" rel="noopener">create dummy or indicator variables using <code>step_regex()</code></a>. The idea here is that we will detect whether these words associated with low/high price are there and create a yes/no variable indicating their presence or absence.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">higher_pat <span style="color:#666">&lt;-</span> glue<span style="color:#666">::</span><span style="color:#06287e">glue_collapse</span>(higher_words, sep <span style="color:#666">=</span> <span style="color:#4070a0">&#34;|&#34;</span>)
lower_pat <span style="color:#666">&lt;-</span> glue<span style="color:#666">::</span><span style="color:#06287e">glue_collapse</span>(lower_words, sep <span style="color:#666">=</span> <span style="color:#4070a0">&#34;|&#34;</span>)

austin_rec <span style="color:#666">&lt;-</span>
  <span style="color:#06287e">recipe</span>(priceRange <span style="color:#666">~</span> ., data <span style="color:#666">=</span> austin_train) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">update_role</span>(uid, new_role <span style="color:#666">=</span> <span style="color:#4070a0">&#34;uid&#34;</span>) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">step_regex</span>(description, pattern <span style="color:#666">=</span> higher_pat, result <span style="color:#666">=</span> <span style="color:#4070a0">&#34;high_price_words&#34;</span>) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">step_regex</span>(description, pattern <span style="color:#666">=</span> lower_pat, result <span style="color:#666">=</span> <span style="color:#4070a0">&#34;low_price_words&#34;</span>) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">step_rm</span>(description) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">step_novel</span>(homeType) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">step_unknown</span>(homeType) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">step_other</span>(homeType, threshold <span style="color:#666">=</span> <span style="color:#40a070">0.02</span>) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">step_dummy</span>(<span style="color:#06287e">all_nominal_predictors</span>()) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">step_nzv</span>(<span style="color:#06287e">all_predictors</span>())

austin_rec
</code></pre></div><pre><code>## Data Recipe
## 
## Inputs:
## 
##       role #variables
##    outcome          1
##  predictor         13
##        uid          1
## 
## Operations:
## 
## Regular expression dummy variable using `outdoor|custom|pool|office|suite|gorgeous|w|windows|private|car|high|full`
## Regular expression dummy variable using `carpet|paint|close|flooring|shopping|new|easy|minutes|tile|great|community|location`
## Delete terms description
## Novel factor level assignment for homeType
## Unknown factor level assignment for homeType
## Collapsing factor levels for homeType
## Dummy variables from all_nominal_predictors()
## Sparse, unbalanced variable filter on all_predictors()
</code></pre>
<p>Now let‚Äôs create a tunable xgboost model specification, tuning a lot of the important model hyperparameters, and combine it with our feature engineering recipe in a <code>workflow()</code>. We can also create a custom <code>xgb_grid</code> to specify what parameters I want to try out, like not-too-small learning rate, avoiding tree stubs, etc. I chose this parameter grid to get reasonable performance in a reasonable amount of tuning time.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">xgb_spec <span style="color:#666">&lt;-</span>
  <span style="color:#06287e">boost_tree</span>(
    trees <span style="color:#666">=</span> <span style="color:#40a070">1000</span>,
    tree_depth <span style="color:#666">=</span> <span style="color:#06287e">tune</span>(),
    min_n <span style="color:#666">=</span> <span style="color:#06287e">tune</span>(),
    mtry <span style="color:#666">=</span> <span style="color:#06287e">tune</span>(),
    sample_size <span style="color:#666">=</span> <span style="color:#06287e">tune</span>(),
    learn_rate <span style="color:#666">=</span> <span style="color:#06287e">tune</span>()
  ) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">set_engine</span>(<span style="color:#4070a0">&#34;xgboost&#34;</span>) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">set_mode</span>(<span style="color:#4070a0">&#34;classification&#34;</span>)

xgb_word_wf <span style="color:#666">&lt;-</span> <span style="color:#06287e">workflow</span>(austin_rec, xgb_spec)

<span style="color:#06287e">set.seed</span>(<span style="color:#40a070">123</span>)
xgb_grid <span style="color:#666">&lt;-</span>
  <span style="color:#06287e">grid_max_entropy</span>(
    <span style="color:#06287e">tree_depth</span>(<span style="color:#06287e">c</span>(<span style="color:#40a070">5L</span>, <span style="color:#40a070">10L</span>)),
    <span style="color:#06287e">min_n</span>(<span style="color:#06287e">c</span>(<span style="color:#40a070">10L</span>, <span style="color:#40a070">40L</span>)),
    <span style="color:#06287e">mtry</span>(<span style="color:#06287e">c</span>(<span style="color:#40a070">5L</span>, <span style="color:#40a070">10L</span>)),
    <span style="color:#06287e">sample_prop</span>(<span style="color:#06287e">c</span>(<span style="color:#40a070">0.5</span>, <span style="color:#40a070">1.0</span>)),
    <span style="color:#06287e">learn_rate</span>(<span style="color:#06287e">c</span>(<span style="color:#40a070">-2</span>, <span style="color:#40a070">-1</span>)),
    size <span style="color:#666">=</span> <span style="color:#40a070">20</span>
  )

xgb_grid
</code></pre></div><pre><code>## # A tibble: 20 √ó 5
##    tree_depth min_n  mtry sample_size learn_rate
##         &lt;int&gt; &lt;int&gt; &lt;int&gt;       &lt;dbl&gt;      &lt;dbl&gt;
##  1          7    33     8       0.768     0.0845
##  2         10    33     7       0.928     0.0784
##  3          5    21     6       0.626     0.0868
##  4          9    31     8       0.728     0.0162
##  5          8    35     5       0.666     0.0937
##  6          6    21     5       0.907     0.0105
##  7          6    27     6       0.982     0.0729
##  8          7    33     8       0.936     0.0102
##  9          7    15     5       0.559     0.0182
## 10          6    35     9       0.784     0.0347
## 11          9    39     9       0.737     0.0582
## 12          8    17     8       0.596     0.0818
## 13          9    21     7       0.601     0.0136
## 14          7    15     7       0.763     0.0197
## 15          6    12    10       0.800     0.0569
## 16          9    19     9       0.589     0.0138
## 17         10    14     5       0.829     0.0140
## 18          8    37    10       0.664     0.0202
## 19          5    11     5       0.514     0.0136
## 20         10    38     9       0.962     0.0150
</code></pre>
<p>Now we can tune across the grid of parameters and our resamples. Since we are trying quite a lot of hyperparameter combinations, let‚Äôs use 
<a href="https://juliasilge.com/blog/baseball-racing/" target="_blank" rel="noopener">racing</a> to quit early on clearly bad hyperparameter combinations.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#06287e">library</span>(finetune)
doParallel<span style="color:#666">::</span><span style="color:#06287e">registerDoParallel</span>()

<span style="color:#06287e">set.seed</span>(<span style="color:#40a070">234</span>)
xgb_word_rs <span style="color:#666">&lt;-</span>
  <span style="color:#06287e">tune_race_anova</span>(
    xgb_word_wf,
    austin_folds,
    grid <span style="color:#666">=</span> xgb_grid,
    metrics <span style="color:#666">=</span> <span style="color:#06287e">metric_set</span>(mn_log_loss),
    control <span style="color:#666">=</span> <span style="color:#06287e">control_race</span>(verbose_elim <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">TRUE</span>)
  )

xgb_word_rs
</code></pre></div><pre><code>## # Tuning results
## # 5-fold cross-validation using stratification 
## # A tibble: 5 √ó 5
##   splits              id    .order .metrics          .notes          
##   &lt;list&gt;              &lt;chr&gt;  &lt;int&gt; &lt;list&gt;            &lt;list&gt;          
## 1 &lt;split [5996/1502]&gt; Fold1      3 &lt;tibble [20 √ó 9]&gt; &lt;tibble [0 √ó 1]&gt;
## 2 &lt;split [5999/1499]&gt; Fold3      1 &lt;tibble [20 √ó 9]&gt; &lt;tibble [0 √ó 1]&gt;
## 3 &lt;split [6000/1498]&gt; Fold5      2 &lt;tibble [20 √ó 9]&gt; &lt;tibble [0 √ó 1]&gt;
## 4 &lt;split [5999/1499]&gt; Fold4      4 &lt;tibble [10 √ó 9]&gt; &lt;tibble [0 √ó 1]&gt;
## 5 &lt;split [5998/1500]&gt; Fold2      5 &lt;tibble [4 √ó 9]&gt;  &lt;tibble [0 √ó 1]&gt;
</code></pre>
<p>That takes a little while but we did it!</p>




<h2 id="evaluate-results">Evaluate results
  <a href="#evaluate-results"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>First off, how did the ‚Äúrace‚Äù go?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#06287e">plot_race</span>(xgb_word_rs)
</code></pre></div><img src="https://juliasilge.com/blog/austin-housing/index_files/figure-html/unnamed-chunk-15-1.png" width="2400" />
<p>We can look at the top results manually as well.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#06287e">show_best</span>(xgb_word_rs)
</code></pre></div><pre><code>## # A tibble: 4 √ó 11
##    mtry min_n tree_depth learn_rate sample_size .metric   .estimator  mean     n
##   &lt;int&gt; &lt;int&gt;      &lt;int&gt;      &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;
## 1     5    14         10     0.0140       0.829 mn_log_l‚Ä¶ multiclass 0.920     5
## 2     7    15          7     0.0197       0.763 mn_log_l‚Ä¶ multiclass 0.921     5
## 3     5    15          7     0.0182       0.559 mn_log_l‚Ä¶ multiclass 0.921     5
## 4     9    19          9     0.0138       0.589 mn_log_l‚Ä¶ multiclass 0.923     5
## # ‚Ä¶ with 2 more variables: std_err &lt;dbl&gt;, .config &lt;chr&gt;
</code></pre>
<p>Let‚Äôs use <code>last_fit()</code> to fit one final time to the <strong>training</strong> data and evaluate one final time on the <strong>testing</strong> data, with the numerically optimal result from <code>xgb_word_rs</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">xgb_last <span style="color:#666">&lt;-</span>
  xgb_word_wf <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">finalize_workflow</span>(<span style="color:#06287e">select_best</span>(xgb_word_rs, <span style="color:#4070a0">&#34;mn_log_loss&#34;</span>)) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">last_fit</span>(austin_split)

xgb_last
</code></pre></div><pre><code>## # Resampling results
## # Manual resampling 
## # A tibble: 1 √ó 6
##   splits              id               .metrics  .notes   .predictions .workflow
##   &lt;list&gt;              &lt;chr&gt;            &lt;list&gt;    &lt;list&gt;   &lt;list&gt;       &lt;list&gt;   
## 1 &lt;split [7498/2502]&gt; train/test split &lt;tibble ‚Ä¶ &lt;tibble‚Ä¶ &lt;tibble [2,‚Ä¶ &lt;workflo‚Ä¶
</code></pre>
<p>How did this model perform on the testing data, that was not used in tuning/training?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#06287e">collect_predictions</span>(xgb_last) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">mn_log_loss</span>(priceRange, `.pred_0-250000`<span style="color:#666">:</span>`.pred_650000+`)
</code></pre></div><pre><code>## # A tibble: 1 √ó 3
##   .metric     .estimator .estimate
##   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;
## 1 mn_log_loss multiclass     0.910
</code></pre>
<p>This result is pretty good for a single (not ensembled) model and is a wee bit better than what I did during the SLICED competition. I had an R bomb right as I was finishing up tuning a model just like the one I am demonstrating here!</p>
<p>How does this model perform across the different classes?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#06287e">collect_predictions</span>(xgb_last) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">conf_mat</span>(priceRange, .pred_class) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">autoplot</span>()
</code></pre></div><img src="https://juliasilge.com/blog/austin-housing/index_files/figure-html/unnamed-chunk-19-1.png" width="2400" />
<p>We can also visualize this with an ROC curve.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#06287e">collect_predictions</span>(xgb_last) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">roc_curve</span>(priceRange, `.pred_0-250000`<span style="color:#666">:</span>`.pred_650000+`) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">ggplot</span>(<span style="color:#06287e">aes</span>(<span style="color:#40a070">1</span> <span style="color:#666">-</span> specificity, sensitivity, color <span style="color:#666">=</span> .level)) <span style="color:#666">+</span>
  <span style="color:#06287e">geom_abline</span>(lty <span style="color:#666">=</span> <span style="color:#40a070">2</span>, color <span style="color:#666">=</span> <span style="color:#4070a0">&#34;gray80&#34;</span>, size <span style="color:#666">=</span> <span style="color:#40a070">1.5</span>) <span style="color:#666">+</span>
  <span style="color:#06287e">geom_path</span>(alpha <span style="color:#666">=</span> <span style="color:#40a070">0.8</span>, size <span style="color:#666">=</span> <span style="color:#40a070">1.2</span>) <span style="color:#666">+</span>
  <span style="color:#06287e">coord_equal</span>() <span style="color:#666">+</span>
  <span style="color:#06287e">labs</span>(color <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">NULL</span>)
</code></pre></div><img src="https://juliasilge.com/blog/austin-housing/index_files/figure-html/unnamed-chunk-20-1.png" width="2400" />
<p>Notice that it is easier to identify the most expensive homes but more difficult to correctly classify the less expensive homes.</p>
<p>What features are most important for this xgboost model?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#06287e">library</span>(vip)
<span style="color:#06287e">extract_workflow</span>(xgb_last) <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">extract_fit_parsnip</span>() <span style="color:#666">%&gt;%</span>
  <span style="color:#06287e">vip</span>(geom <span style="color:#666">=</span> <span style="color:#4070a0">&#34;point&#34;</span>, num_features <span style="color:#666">=</span> <span style="color:#40a070">15</span>)
</code></pre></div><img src="https://juliasilge.com/blog/austin-housing/index_files/figure-html/unnamed-chunk-21-1.png" width="2400" />
<p>The spatial information in latitude/longitude are by far the most important. Notice that the model uses <code>low_price_words</code> more than it uses, for example, whether there is a spa or whether it is a single family home (as opposed to a townhome or condo). It looks like the model is trying to distinguish some of those lower priced categories. The model does <em>not</em> really use the <code>high_price_words</code> variable, perhaps because it is already easy to find the expensive houses.</p>
<p>The two finalists from SLICED go on to compete next Tuesday, which should be fun and interesting to watch! I have enjoyed the opportunity to participate this season.</p>

        
        <details closed class="f6 fw7 input-reset">
  <dl class="f6 lh-copy">
    <dt class="fw7">Posted on:</dt>
    <dd class="fw5 ml0">August 15, 2021</dd>
  </dl>
  <dl class="f6 lh-copy">
    <dt class="fw7">Length:</dt>
    <dd class="fw5 ml0">12 minute read, 2388 words</dd>
  </dl>
  
  <dl class="f6 lh-copy">
    <dt class="fw7">Categories:</dt>
    <dd class="fw5 ml0"> <a href="https://juliasilge.com/categories/rstats">rstats</a>  <a href="https://juliasilge.com/categories/tidymodels">tidymodels</a> </dd>
  </dl>
  
  
  
  <dl class="f6 lh-copy">
    <dt class="fw7">Tags:</dt>
    <dd class="fw5 ml0"> <a href="https://juliasilge.com/tags/rstats">rstats</a>  <a href="https://juliasilge.com/tags/tidymodels">tidymodels</a> </dd>
  </dl>
  
  <dl class="f6 lh-copy">
    <dt class="fw7">See Also:</dt>
    
    <dd class="fw5 ml0"><a href="/blog/educational-attainment/">Educational attainment in #TidyTuesday UK towns</a></dd>
    
    <dd class="fw5 ml0"><a href="/blog/polling-places/">Changes in #TidyTuesday US polling places</a></dd>
    
    <dd class="fw5 ml0"><a href="/blog/doctor-who-bayes/">Empirical Bayes for #TidyTuesday Doctor Who episodes</a></dd>
    
  </dl>
</details>

      </section>
      <footer class="post-footer">
        <div class="post-pagination dt w-100 mt4 mb2">
  
  
    <a class="prev dtc pr2 tl v-top fw6"
    href="https://juliasilge.com/blog/star-trek/">&larr; Modeling human/computer interactions on Star Trek from #TidyTuesday with workflowsets</a>
  
  
  
    <a class="next dtc pl2 tr v-top fw6"
    href="https://juliasilge.com/blog/smltar-complete/">Supervised Machine Learning for Text Analysis in R is now complete &rarr;</a>
  
</div>

      </footer>
    </article>
    
      
<div class="post-comments pa0 pa4-l mt4">
  
  <script src="https://utteranc.es/client.js"
          repo="juliasilge/juliasilge.com"
          issue-term="title"
          theme="github-light"
          label="comments :speech_balloon:"
          crossorigin="anonymous"
          async
          type="text/javascript">
  </script>
  
</div>

    
  </section>
</main>
<footer class="site-footer pv4 bt b--transparent ph5" role="contentinfo">
  <nav class="db dt-l w-100">
    <p class="site-copyright f7 db dtc-l v-mid w-100 w-33-l tc tl-l pv2 pv0-l mv0 lh-copy">
      &copy; 2024 Julia Silge
      <span class="middot-divider"></span>
      Made with <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/hugo-apero/" rel="dct:source">Hugo Ap√©ro</a></span>.
      <br />
      
Based on <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/formspree/blogophonic-hugo" rel="dct:source">Blogophonic</a></span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://formspree.io" property="cc:attributionName" rel="cc:attributionURL">Formspree</a>.
    </p>
    
    <div class="site-links f6 db dtc-l v-mid w-100 w-67-l tc tr-l pv2 pv0-l mv0">
      
      <a class="dib pv1 ph2 link" href="/license/" title="License">License</a>
      
    </div>
  </nav>
  
    <script>

    var i, text, code, codes = document.getElementsByTagName('code');
    for (let i = 0; i < codes.length;) {
      code = codes[i];
      if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
        text = code.textContent;
        if (/^\$[^$]/.test(text) && /[^$]\$$/.test(text)) {
          text = text.replace(/^\$/, '\\(').replace(/\$$/, '\\)');
          code.textContent = text;
        }
        if (/^\\\((.|\s)+\\\)$/.test(text) ||
            /^\\\[(.|\s)+\\\]$/.test(text) ||
            /^\$(.|\s)+\$$/.test(text) ||
            /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
          code.outerHTML = code.innerHTML;  
          continue;
        }
      }
      i++;
    }
</script>

  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>



    
  
  
</footer>

      </div>
    </body>
</html>
